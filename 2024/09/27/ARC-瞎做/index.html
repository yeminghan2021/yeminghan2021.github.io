<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Georgia:300,300italic,400,400italic,700,700italic%7CFira+code:300,300italic,400,400italic,700,700italic%7CConsolas:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"yeminghan2021.github.io","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.21.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"flat"},"fold":{"enable":true,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":3,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="更新进度：ARC104-109">
<meta property="og:type" content="article">
<meta property="og:title" content="ARC 瞎做">
<meta property="og:url" content="http://yeminghan2021.github.io/2024/09/27/ARC-%E7%9E%8E%E5%81%9A/index.html">
<meta property="og:site_name" content="ymh&#39;s bloggie">
<meta property="og:description" content="更新进度：ARC104-109">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-09-27T05:15:30.000Z">
<meta property="article:modified_time" content="2025-01-01T13:13:25.768Z">
<meta property="article:author" content="Ye Minghan">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://yeminghan2021.github.io/2024/09/27/ARC-%E7%9E%8E%E5%81%9A/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://yeminghan2021.github.io/2024/09/27/ARC-%E7%9E%8E%E5%81%9A/","path":"2024/09/27/ARC-瞎做/","title":"ARC 瞎做"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>ARC 瞎做 | ymh's bloggie</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">ymh's bloggie</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">If you're weak, just practise more.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#arc104"><span class="nav-number">1.</span> <span class="nav-text">ARC104</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#c"><span class="nav-number">1.1.</span> <span class="nav-text">C</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#d"><span class="nav-number">1.2.</span> <span class="nav-text">D</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#e"><span class="nav-number">1.3.</span> <span class="nav-text">E</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#f"><span class="nav-number">1.4.</span> <span class="nav-text">F</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#arc105"><span class="nav-number">2.</span> <span class="nav-text">ARC105</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#c-1"><span class="nav-number">2.1.</span> <span class="nav-text">C</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#d-1"><span class="nav-number">2.2.</span> <span class="nav-text">D</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#e-1"><span class="nav-number">2.3.</span> <span class="nav-text">E</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#f-1"><span class="nav-number">2.4.</span> <span class="nav-text">F</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#arc106"><span class="nav-number">3.</span> <span class="nav-text">ARC106</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#d-2"><span class="nav-number">3.1.</span> <span class="nav-text">D</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#e-2"><span class="nav-number">3.2.</span> <span class="nav-text">E</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#f-2"><span class="nav-number">3.3.</span> <span class="nav-text">F</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#arc107"><span class="nav-number">4.</span> <span class="nav-text">ARC107</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#d-3"><span class="nav-number">4.1.</span> <span class="nav-text">D</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#e-3"><span class="nav-number">4.2.</span> <span class="nav-text">E</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#f-3"><span class="nav-number">4.3.</span> <span class="nav-text">F</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#arc108"><span class="nav-number">5.</span> <span class="nav-text">ARC108</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#d-4"><span class="nav-number">5.1.</span> <span class="nav-text">D</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#e-4"><span class="nav-number">5.2.</span> <span class="nav-text">E</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#f-4"><span class="nav-number">5.3.</span> <span class="nav-text">F</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#arc109"><span class="nav-number">6.</span> <span class="nav-text">ARC109</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#d-5"><span class="nav-number">6.1.</span> <span class="nav-text">D</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#e-5"><span class="nav-number">6.2.</span> <span class="nav-text">E</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#f-5"><span class="nav-number">6.3.</span> <span class="nav-text">F</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ye Minghan"
      src="https://cdn.luogu.com.cn/upload/usericon/549499.png">
  <p class="site-author-name" itemprop="name">Ye Minghan</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">10</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/yeminghan2021" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;yeminghan2021" rel="noopener me" target="_blank">GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.luogu.com.cn/user/549499" title="Luogu → https:&#x2F;&#x2F;www.luogu.com.cn&#x2F;user&#x2F;549499" rel="noopener me" target="_blank">Luogu</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://codeforces.com/profile/yeminghan" title="CodeForces → https:&#x2F;&#x2F;codeforces.com&#x2F;profile&#x2F;yeminghan" rel="noopener me" target="_blank">CodeForces</a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yeminghan2021.github.io/2024/09/27/ARC-%E7%9E%8E%E5%81%9A/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.luogu.com.cn/upload/usericon/549499.png">
      <meta itemprop="name" content="Ye Minghan">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ymh's bloggie">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="ARC 瞎做 | ymh's bloggie">
      <meta itemprop="description" content="更新进度：ARC104-109">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ARC 瞎做
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-09-27 13:15:30" itemprop="dateCreated datePublished" datetime="2024-09-27T13:15:30+08:00">2024-09-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-01 21:13:25" itemprop="dateModified" datetime="2025-01-01T21:13:25+08:00">2025-01-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/solutions/" itemprop="url" rel="index"><span itemprop="name">solutions</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/solutions/AtCoder/" itemprop="url" rel="index"><span itemprop="name">AtCoder</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

            <div class="post-description">更新进度：ARC104-109</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>范围：<span
class="math inline">\(\text{ARC}[\ge104][\text{C|D|E|F}]\land\text{Difficulty}\ge1600\)</span>。</p>
<h2 id="arc104">ARC104</h2>
<h3 id="c">C</h3>
<p>可以发现一段极小的合法区间必然是这样的一个形式：</p>
<p><span
class="math display">\[[x,x+y],[x+1,x+y+1],\ldots,[x+y-1,x+2y-1].\]</span></p>
<p>然后你直接判区间合法 dp 一下就行了。细节有点多。</p>
<h3 id="d">D</h3>
<p>考虑 dp，令 <span class="math inline">\(dp_{i,j,k}\)</span>
表示考虑了 <span class="math inline">\(1\sim i\)</span>
的所有数字，一共选了 <span class="math inline">\(j\)</span> 个，和为
<span class="math inline">\(k\)</span> 的方案数。</p>
<p><del>直接做是 <span class="math inline">\(n^7\)</span>
的过牛魔啊。。。</del></p>
<p>首先前缀和优化砍掉一个 <span
class="math inline">\(n\)</span>。然后你发现状态数就是这么多，必须优化状态数。</p>
<p>考虑求 <span class="math inline">\(x\)</span> 的答案，不妨整体平移
<span class="math inline">\(x\)</span>，那么就是 <span
class="math inline">\(1-x\)</span> 到 <span
class="math inline">\(n-x\)</span> 各 <span
class="math inline">\(k\)</span> 个，选出若干个和为 <span
class="math inline">\(0\)</span>。</p>
<p>那么设 <span class="math inline">\(dp_{i,j}\)</span> 表示考虑了 <span
class="math inline">\((1-x)\sim(i-x)\)</span> 的所有数，和为 <span
class="math inline">\(j\)</span> 的方案数。那么求单个数的答案是 <span
class="math inline">\(n^4\)</span>
的，<del>常数小也许能冲过去？</del></p>
<p>考虑正负分开算，设 <span class="math inline">\(dp_{i,j}\)</span>
表示考虑 <span class="math inline">\(1\sim i\)</span> 的所有数，和为
<span class="math inline">\(j\)</span> 的方案数。</p>
<p>那么可以发现 <span class="math inline">\(x\)</span> 的答案就是 <span
class="math inline">\(\displaystyle(k+1)\sum_{i=0}^\infty
dp_{x-1,i}\cdot
dp_{n-x,i}\)</span>。（就是正数总和等于负数绝对值总和）</p>
<p>那么时间复杂度为 <span
class="math inline">\(\Theta(n^4)\)</span>。</p>
<h3 id="e">E</h3>
<p>厉害题。看了题解才会。</p>
<p>考虑爆枚这 <span class="math inline">\(n\)</span>
个数的大小关系（<strong>可能相等</strong>），然后算出它的 LIS
长度，那么转化为求方案数。</p>
<p>发现问题变成了：</p>
<blockquote>
<p>给出 <span class="math inline">\(A\)</span>，求满足 <span
class="math inline">\(1\le a_i\le A_i\)</span>
的<strong>严格上升</strong>序列 <span class="math inline">\(a\)</span>
的数量。</p>
</blockquote>
<p>不妨假设 <span class="math inline">\(A\)</span> 不降，<span
class="math inline">\(A_0=0\)</span>。</p>
<p>设 <span class="math inline">\(dp_{i,j}\)</span> 表示将 <span
class="math inline">\(1\sim a_j\)</span> 填在 <span
class="math inline">\([1,A_i]\)</span> 中的方案数。</p>
<p>那么有转移：</p>
<p><span class="math display">\[dp_{i+1,j+k}\gets
\binom{A_{i+1}-A_i}k\cdot dp_{i,j}.\]</span></p>
<p>由于 <span class="math inline">\(k\)</span> 很小直接 <span
class="math inline">\(\Theta(k)\)</span> 算组合数即可。</p>
<p>然后就做完了。时间是 <span
class="math inline">\(\Theta(n^n\cdot\mathrm{poly}(n))\)</span>，但是多几只
<span class="math inline">\(n\)</span> 也随便冲。</p>
<h3 id="f">F</h3>
<p>不妨设 <span class="math inline">\(-1\)</span>
的位置有一个无限高的，不影响。</p>
<p>你考虑 <span class="math inline">\(p_i=j\)</span> 的限制就是 <span
class="math inline">\(p_j&gt;p_i\)</span> 且【<span
class="math inline">\(i&lt;k&lt;j\)</span> 时 <span
class="math inline">\(p_j\le p_i\)</span>】。</p>
<p>然后你考虑把笛卡尔树建出来，那么就是左儿子小于等于它的，右儿子小于它的。</p>
<p>那么枚举根就变成两个区间的子问题了，dp 即可。（设 <span
class="math inline">\(dp_{l,r,v}\)</span> 表示 <span
class="math inline">\([l,r]\)</span> 内，值域为 <span
class="math inline">\([1,v]\)</span> 的方案数。）</p>
<p>注意到无论你怎么限制也只需要 <span class="math inline">\(n\)</span>
的值域，所以状态数为 <span
class="math inline">\(\Theta(n^3)\)</span>，转移只需枚举根，所以时间复杂度为
<span class="math inline">\(\Theta(n^4)\)</span>。</p>
<h2 id="arc105">ARC105</h2>
<h3 id="c-1">C</h3>
<p>首先这题很难把骆驼状压，只能 <span class="math inline">\(n!\)</span>
爆枚。那么就不能再带一只 <span class="math inline">\(m\)</span> 了。</p>
<p>假设确定了一个顺序。现在我们要求出前后两只骆驼的最小距离。</p>
<p>考虑 dp，设 <span class="math inline">\(dp_i\)</span> 表示第一只和第
<span class="math inline">\(i\)</span> 只骆驼的最小距离。</p>
<p>转移时，考虑 <span class="math inline">\(j\sim i\)</span>
只骆驼的限制：</p>
<p><span class="math display">\[\forall p\text{ such that
}v_p&lt;\sum_{k=j}^iw_i,dp_i\ge dp_j+l_p\]</span></p>
<p>用人话说就是重量超了就必须隔得够远。</p>
<p>注意到「所有 <span class="math inline">\(v_p\)</span>
小于某个值」的位置会产生限制，那么可以按 <span
class="math inline">\(v\)</span> 从小到大排序，那么每次就是取一段前缀的
<span class="math inline">\(l\)</span>
的最大值，预处理即可。转移时直接二分出产生限制的那段前缀即可。</p>
<p>于是时间复杂度为 <span class="math inline">\(\Theta(n!n^2\log m+m\log
m)\)</span>。</p>
<h3 id="d-1">D</h3>
<p>显然根据 <span class="math inline">\(n\)</span>
的奇偶性会有一个人（设为 X）死命让异或和非 <span
class="math inline">\(0\)</span>，反之亦然。</p>
<p>那么首先如果所有的 <span class="math inline">\(cnt\)</span>
都是偶数，那么另一个人只要模仿 X 的操作就能让 X 必输。</p>
<p>反之，X
可以每次把石子数最多的那袋扔到石子数最多的盘子，那么最后那个盘子的石子数会大于总数的一半，从而使异或和非
<span class="math inline">\(0\)</span> 而获胜。</p>
<p>时间复杂度 <span class="math inline">\(\Theta(n)\)</span> 或 <span
class="math inline">\(\Theta(n\log n)\)</span>。</p>
<h3 id="e-1">E</h3>
<p><del>GameCoder。</del></p>
<p>考虑最后加不动边时的图，可以发现一定是 <span
class="math inline">\(1\)</span> 和 <span
class="math inline">\(n\)</span>
分别在两坨点组成的团里。它有多少条边呢？假设其中一坨有 <span
class="math inline">\(i\)</span> 个点：</p>
<p><span class="math display">\[\begin{aligned}
&amp;\frac{i(i-1)}2+\frac{(n-i)(n-i-1)}2\\
=&amp;\frac{i^2-i+n^2-2in+i^2+i-n}2\\
=&amp;i^2-in+\frac{n^2-n}2
\end{aligned}\]</span></p>
<p>可以发现，如果 <span class="math inline">\(n\)</span>
是奇数，那么最后边数的奇偶性是固定的，胜负已分。</p>
<p>如果 <span class="math inline">\(n\)</span>
是偶数，那么其中一个人就会死命让 <span class="math inline">\(i\)</span>
变成偶数，另一个人死命让 <span class="math inline">\(i\)</span>
变成奇数。</p>
<p>然后反正就是考虑一下镜像操作，结论就是如果先手死命抢偶数，那么当且仅当
<span class="math inline">\(1\)</span> 和 <span
class="math inline">\(n\)</span>
所在连通块大小至少有一个是偶数时先手赢；如果先手死命抢奇数，那么当且仅当有一个是奇数时先手赢。</p>
<h3 id="f-1">F</h3>
<p>这不是我们的 <a
target="_blank" rel="noopener" href="https://atcoder.jp/contests/abc327/tasks/abc327_g">ABC327G</a>
吗。</p>
<p>首先你需要发现这个 good 的一坨定义说的是那个图是一个连通二分图。</p>
<p>设 <span class="math inline">\(U\)</span> 为全集，<span
class="math inline">\(f_S\)</span> 表示由 <span
class="math inline">\(S\)</span>
的导出子图组成的<strong>染色</strong>二分图的数量。（这个咋求等下再说）</p>
<p>那么参考那个题的套路，设 <span class="math inline">\(h_S\)</span>
为由 <span class="math inline">\(S\)</span>
的导出子图组成的<strong>连通染色</strong>二分图的数量。</p>
<p>那么容斥一下可以得到：</p>
<p><span class="math display">\[h_S=f_S-\sum_{\substack{T\subset
S\\\min\{S\}\in T}}h_T\cdot f_{S\backslash T}\]</span></p>
<p>而连通二分图只有两种染色方式，那么答案就是 <span
class="math inline">\(\dfrac{h_U}2\)</span>。</p>
<p>然后看怎么求 <span class="math inline">\(f_S\)</span>。</p>
<p>直接暴力枚举染色方案，那么方案数就是 <span
class="math inline">\(2^{e}\)</span>，其中 <span
class="math inline">\(e\)</span> 是连接两个异色点的边数。</p>
<p>但是暴力做是 <span class="math inline">\(\Theta(3^nm)\)</span>
的，过不去。</p>
<p>考虑优化，预处理出 <span class="math inline">\(cnt_{S,i}\)</span>
表示连接 <span class="math inline">\(i\)</span> 和 <span
class="math inline">\(S\)</span> 中任意一点的边数。</p>
<p>那么考虑递推求 <span class="math inline">\(f_S\)</span>。设 <span
class="math inline">\(res_T\)</span> 表示 <span
class="math inline">\(T\)</span> 中点染黑，其它染白，的异色边数。</p>
<p>则有 <span class="math inline">\(res_\varnothing=0\)</span>；设 <span
class="math inline">\(T\ne\varnothing\)</span>，那么令 <span
class="math inline">\(v\in T\)</span>，易得 <span
class="math inline">\(res_T=res_{T\backslash\{v\}}-cnt_{T,v}+cnt_{S\backslash
T,v}\)</span>。</p>
<p>这样就做到了 <span
class="math inline">\(\Theta(3^n+2^nm)\)</span>。</p>
<h2 id="arc106">ARC106</h2>
<h3 id="d-2">D</h3>
<p>注意到 <span
class="math inline">\((a+b)^c=\displaystyle\sum_{i=0}^c\binom
cia^ib^{c-i}\)</span>，令 <span
class="math inline">\(s_i=\displaystyle\sum_{j=1}^na_j^i\)</span>，那么就有</p>
<p><span class="math display">\[\begin{aligned}
&amp;\sum_{i=1}^n\sum_{j=i+1}^n(a_i+a_j)^x\\
=&amp;\sum_{i=1}^n\sum_{j=i+1}^n\sum_{k=0}^x\binom xka_i^ka_j^{x-k}\\
=&amp;\sum_{k=0}^x\binom xk\sum_{i=1}^na_i^k\sum_{j=i+1}^na_j^{x-k}\\
=&amp;\sum_{k=0}^x\binom xk\cdot\frac12(s_ks_{x-k}-s_x)
\end{aligned}\]</span></p>
<p>于是直接就 <span class="math inline">\(\Theta(nk+k^2)\)</span>
做完了。</p>
<h3 id="e-2">E</h3>
<p>想了半天发现是唐题。</p>
<p>你考虑二分，然后直接上 Hall 定理就等价于对于任意一个员工集合 <span
class="math inline">\(S\)</span> 都有：<span
class="math inline">\(S\)</span> 中有员工来工作的天数 <span
class="math inline">\(\ge k\cdot|S|\)</span>。</p>
<p>容斥一下就是 <span class="math inline">\(S\)</span>
里面一个也不来的天数小于某个值。</p>
<p>然后这个对于所有的 <span class="math inline">\(S\)</span>
求可以高维前缀和做到 <span
class="math inline">\(\Theta(n\cdot2^n)\)</span>。</p>
<p>不难发现答案上界是 <span
class="math inline">\(2nk\)</span>，直接预处理每天的考勤情况即可。时间复杂度
<span
class="math inline">\(\Theta(n^2k+nk\log(nk)+n2^n\log(nk))\)</span>。</p>
<h3 id="f-2">F</h3>
<p>首先一个前置知识就是：给定度数序列 <span
class="math inline">\(f\)</span>，可以构成 <span
class="math inline">\(\dfrac{(n-2)!}{\prod (f_i-1)!}\)</span>
棵不同的树。（可以通过 Prüfer 序列证明）</p>
<p>那么如果钦定每个部分的度数 <span
class="math inline">\(f\)</span>，怎么统计不同的洞带来的贡献呢？</p>
<p>从每个部分随便<strong>排列</strong> <span
class="math inline">\(f_i\)</span>
个洞，那么就可以将排列的第一个洞连到父亲，其它的依次连到儿子，可以证明这样是不重不漏的，所以方案数是
<span class="math inline">\(\dfrac{d_i!}{(d_i-f_i)!}\)</span>。</p>
<p>那么就可以列出答案的式子：</p>
<p><span class="math display">\[\begin{aligned}
&amp;\sum_{f\text{ is valid}}\frac{(n-2)!\prod
d_i!}{\prod(d_i-f_i)!(f_i-1)!}\\
=&amp;(n-2)!\left(\prod_{i=1}^nd_i\right)\sum_{f\text{ is
valid}}\prod_{i=1}^n\binom{d_i-1}{f_i-1}\
\end{aligned}\]</span></p>
<p>考虑算右边那坨东西。注意到 <span class="math inline">\(\sum
f_i=2n-2\)</span>，则 <span
class="math inline">\(\sum(f_i-1)=n-2\)</span>，考虑如下问题：</p>
<blockquote>
<p>有 <span class="math inline">\(\sum(d_i-1)\)</span>
个不同的物品，被分成了 <span class="math inline">\(n\)</span> 组，第
<span class="math inline">\(i\)</span> 组有 <span
class="math inline">\(d_i-1\)</span> 个。求从其中选出 <span
class="math inline">\(n-2\)</span> 个物品的方案数。</p>
</blockquote>
<p>一方面，那一坨东西就相当于枚举每组选了多少个，再在每组里面选。</p>
<p>另一方面，直接选和分组再选没区别，所以它等于 <span
class="math inline">\(\dbinom{\sum(d_i-1)}{n-2}\)</span>。</p>
<p>所以答案为：</p>
<p><span
class="math display">\[(n-2)!\left(\prod_{i=1}^nd_i\right)\binom{\sum(d_i-1)}{n-2}\]</span></p>
<p>时间复杂度 <span class="math inline">\(\Theta(n)\)</span>。</p>
<h2 id="arc107">ARC107</h2>
<h3 id="d-3">D</h3>
<p>这个 dp 的思路很妙啊。</p>
<p>设 <span class="math inline">\(dp_{n,k}\)</span> 表示对应的答案，则
<span class="math inline">\(n\ge k\)</span>（否则答案显然为 <span
class="math inline">\(0\)</span>）。</p>
<p>我们讨论：</p>
<ul>
<li>如果这里面有一个 <span class="math inline">\(1\)</span>，那么就是
<span class="math inline">\(dp_{n-1,k-1}\)</span>；</li>
<li>否则不妨把所有元素乘 <span
class="math inline">\(2\)</span>，那么就是 <span
class="math inline">\(dp_{n,2k}\)</span>。</li>
</ul>
<p>然后就做完了。<span class="math inline">\(\Theta(n^2)\)</span>。</p>
<h3 id="e-3">E</h3>
<p>纯结论题啊。。。</p>
<blockquote>
<p>Lemma：对于任意的 <span class="math inline">\(4\le
i,j&lt;n\)</span>，有 <span
class="math inline">\(a_{i,j}=a_{i+1,j+1}\)</span>。</p>
<p><del>Proof</del>：</p>
<p>你发现只要某一行 <span class="math inline">\(&gt;1\)</span>
列的位置出了个 <span class="math inline">\(0\)</span>，后面 <span
class="math inline">\(2\)</span> 列起就一定满足条件了。</p>
<p>然后你发现第 <span class="math inline">\(3\)</span> 行起两个 <span
class="math inline">\(0\)</span> 就最多隔 <span
class="math inline">\(2\)</span> 个位置……</p>
<p>然后就感性理解……</p>
<p>你也可以写个暴力验证一下 <span
class="math inline">\(5\times5\)</span> 的网格……</p>
</blockquote>
<p>然后你爆算前四行前四列就 <span
class="math inline">\(\Theta(n)\)</span> 了……</p>
<h3 id="f-3">F</h3>
<p>抽象网络流。</p>
<p>绝对值搁在那很难受，考虑换个说法：把它们赋一个（相同的）<span
class="math inline">\(1\)</span> 或 <span
class="math inline">\(-1\)</span> 的权值，和的最大值。</p>
<p>这样就舒服多了：最大值就是很能流的样子；连通块的和，其实就是赋的权值全一样；进一步地，就是相邻的两个结点权值必须一样。</p>
<p>那么此时每个结点有三种状态：赋 <span
class="math inline">\(1\)</span>，赋 <span
class="math inline">\(-1\)</span>，被删掉。</p>
<p>考虑最小割，总价值减去最小要移除的贡献：你对一个结点建两个点 <span
class="math inline">\(X,Y\)</span>，连一条边 <span
class="math inline">\(X\to Y\)</span>，然后设 <span
class="math inline">\(Y\)</span> 在 <span
class="math inline">\(S\)</span> 集代表赋 <span
class="math inline">\(1\)</span>，<span class="math inline">\(X\)</span>
在 <span class="math inline">\(T\)</span> 集表示赋 <span
class="math inline">\(-1\)</span>，否则表示删掉。</p>
<p>然后你随便处理一下限制就完了……</p>
<h2 id="arc108">ARC108</h2>
<h3 id="d-4">D</h3>
<p>不妨设 <span class="math inline">\(c_\texttt{ab}=\texttt
a\)</span>，则第一步只能是 <span
class="math inline">\(\texttt{aab}\)</span>。</p>
<p>此时如果 <span class="math inline">\(c_\texttt{aa}=\texttt
a\)</span>，不难发现只能生成 <span
class="math inline">\(\texttt{aaa}\ldots\texttt{ab}\)</span>，答案为
<span class="math inline">\(1\)</span>。</p>
<p>否则还可以生成 <span
class="math inline">\(\texttt{abab}\)</span>，此时讨论：</p>
<ul>
<li>如果 <span class="math inline">\(c_\texttt{ba}=\texttt
a\)</span>，则可得最终串中只需不存在相邻的两个 <span
class="math inline">\(\texttt b\)</span>，答案是斐波那契数列。</li>
<li>如果 <span class="math inline">\(c_\texttt{ba}=\texttt
b\)</span>，则最终串只需有前缀 <span class="math inline">\(\texttt
a\)</span> 和后缀 <span
class="math inline">\(\texttt{ab}\)</span>，答案为 <span
class="math inline">\(2\)</span> 的幂。</li>
</ul>
<p>（以上结论读者自证不难。）</p>
<p>时间复杂度可以做到 <span class="math inline">\(\Theta(\log
n)\)</span>。</p>
<h3 id="e-4">E</h3>
<p>容易发现选出一个位置后左右独立，所以设 <span
class="math inline">\(dp_{l,r}\)</span> 为 <span
class="math inline">\(l-1\)</span> 和 <span
class="math inline">\(r+1\)</span> 都已选中，<span
class="math inline">\([l,r]\)</span> 内都还未选中时，<span
class="math inline">\([l,r]\)</span> 内的期望贡献。</p>
<p>令设 <span class="math inline">\(S_{l,r}=\{p\in \mathbb N\mid l\le
p\le
r,a_{l-1}&lt;a_p&lt;a_{r+1}\}\)</span>，即区间内合法的凳子的集合。</p>
<p>则容易列出转移方程：</p>
<p><span
class="math display">\[dp_{l,r}=\begin{cases}0,&amp;S_{l,r}=\varnothing\\\displaystyle\frac1{|S_{l,r}|}\sum_{i\in
S_{l,r}}1+dp_{l,i-1}+dp_{i+1,r},&amp;S_{l,r}\ne\varnothing\end{cases}\]</span></p>
<p>对于每一项在值域上树状数组优化即可做到 <span
class="math inline">\(\Theta(n^2\log n)\)</span>。</p>
<h3 id="f-4">F</h3>
<p>考虑转换成对于每个 <span class="math inline">\(x\)</span> 计算 <span
class="math inline">\(\mathrm{niceness}\ge x\)</span> 的方案数。</p>
<p>考虑充要条件：上式不成立当且仅当距离 <span class="math inline">\(\ge
x\)</span> 的点对全部异色。</p>
<p>如果直径长度 <span class="math inline">\(&lt;x\)</span>
显然不可能成立。</p>
<p>如果有一个点到直径两端的距离都 <span class="math inline">\(\ge
x\)</span>，那么直径长度也 <span class="math inline">\(\ge
x\)</span>，显然必定成立。</p>
<p>否则一个点最多和一个直径端点距离 <span class="math inline">\(\ge
x\)</span>。考虑距离 <span class="math inline">\(\ge x\)</span>
的点对连一条边，那么不成立相当于这个图被二分图染色。</p>
<p>这个图的形状显然是直径两端各挂了一坨点，加上一坨孤立点。求孤立点数量也是好做的，直接
bfs 一下算一下到直径端点最短距离就行了。</p>
<h2 id="arc109">ARC109</h2>
<h3 id="d-5">D</h3>
<p>人类智慧 + 打表大法 题，无法理解，咕。</p>
<h3 id="e-5">E</h3>
<p>结论很神仙：</p>
<blockquote>
<p>如果两边颜色一样最后肯定全是那种，否则看两个最靠边的连通块哪个离初始点远，远的种颜色就只有那一段。</p>
</blockquote>
<p>证明略。</p>
<p>然后你考虑两边差的是哪一部分，注意到大多数都会被对称掉，那么剩下的就是距离相等的情况，这种情况必然是黑棋得到中间的。</p>
<p>然后再进行一堆 dirty 的推式子，你会得到一个对于钦定的起点的式子。</p>
<p>然后你发现这玩意每一位都是前一位加了一项，直接递推即可。<span
class="math inline">\(\Theta(n)\)</span>。</p>
<h3 id="f-5">F</h3>
<p>没做，咕。</p>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/09/27/CSP-2024/" rel="prev" title="CSP 2024">
                  <i class="fa fa-angle-left"></i> CSP 2024
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/10/29/duel-%E8%AE%B0/" rel="next" title="duel records">
                  duel records <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  
  <div class="comments giscus-container">
  </div>
  
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Ye Minghan</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="giscus" type="application/json">{"enable":true,"repo":"yeminghan2021/yeminghan2021.github.io","repo_id":"R_kgDOM33xXQ","category":"Announcements","category_id":"DIC_kwDOM33xXc4Ci188","mapping":"pathname","strict":0,"reactions_enabled":1,"emit_metadata":0,"theme":"preferred_color_scheme","lang":"zh-CN","crossorigin":"anonymous","input_position":"top","loading":"lazy"}</script>

<script>
document.addEventListener('page:loaded', () => {
  if (!CONFIG.page.comments) return;

  NexT.utils.loadComments('.giscus-container')
    .then(() => NexT.utils.getScript('https://giscus.app/client.js', {
      attributes: {
        async                   : true,
        crossOrigin             : 'anonymous',
        'data-repo'             : CONFIG.giscus.repo,
        'data-repo-id'          : CONFIG.giscus.repo_id,
        'data-category'         : CONFIG.giscus.category,
        'data-category-id'      : CONFIG.giscus.category_id,
        'data-mapping'          : CONFIG.giscus.mapping,
        'data-strict'           : CONFIG.giscus.strict,
        'data-reactions-enabled': CONFIG.giscus.reactions_enabled,
        'data-emit-metadata'    : CONFIG.giscus.emit_metadata,
        'data-theme'            : CONFIG.giscus.theme,
        'data-lang'             : CONFIG.giscus.lang,
        'data-input-position'   : CONFIG.giscus.input_position,
        'data-loading'          : CONFIG.giscus.loading
      },
      parentNode: document.querySelector('.giscus-container')
    }));
});
</script>

</body>
</html>
